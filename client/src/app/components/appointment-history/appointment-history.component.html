<div class="container">
  <div class="card">
    <div class="card-header">Appointment History</div>

    <div *ngIf="loading" class="spinner"></div>

    <div *ngIf="!loading && appointments.length === 0" class="alert alert-info">
      No appointment history found.
    </div>

    <table class="table" *ngIf="!loading && appointments.length > 0">
      <thead>
        <tr>
          <th>Date Requested</th>
          <th>Appointment Time&Date</th>
          <th>Department</th>
          <th>Doctor</th>
          <th>Status</th>
          <th>Notes</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let appointment of appointments">
          <td>{{ formatDate(appointment.created_at) }}</td>
          <td>{{ formatDateTime(appointment.appointment_date, appointment.appointment_time) }}</td>
          <td>{{ appointment.department }}</td>
          <td>{{ appointment.doctor?.name || appointment.doctor_name || 'N/A' }}</td>
          <td><span [class]="getStatusClass(appointment.status)">{{ appointment.status }}</span></td>
          <td>{{ appointment.admin_notes || '-' }}</td>
        </tr>
      </tbody>
    </table>
  </div>
</div>
